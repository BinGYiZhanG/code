* 照着改，得了10分,运行错误
  * [链接地址](https://blog.csdn.net/richenyunqi/article/details/101396817#commentBox)
```
#include <bits/stdc++.h>

using namespace std;

struct Commodity{
    int id,score;
    Commodity(int i,int s):id(i),score(s){}
    bool operator<(const Commodity& c)const{
        if(this->score!=c.score)
            return this->score>c.score;
        else
            return this->id<c.id;
    }
};

const long long mul=(long long)(1e9);

int main(){
    set<Commodity> commodities;///建立商品集合
    unordered_map<long long,set<Commodity>::iterator > um;

    int n,m;
    int id,score;
    scanf("%d%d",&m,&n);
    for(int i=0;i<n;i++){
        scanf("%d%d",&id,&score);
        for(int j=0;j<m;j++){
            long long a=j*mul+id;///将物品类别j与物品编号id建立映射
            um[a]=commodities.insert(Commodity(a,score)).first;
        }
    }
    int op,ch;
    int t,K;
    vector<int> k(m);///m类商品的最大可推荐总数
    scanf("%d",&op);
    for(int opi=0;opi<op;opi++){
        scanf("%d",&ch);
        if(ch==1){///添加商品
            scanf("%d%d%d",&t,&id,&score);
            long long a=t*mul+id;///将物品类别t与物品编号id建立映射
            um[a]=commodities.insert(Commodity(a,score)).first;///获取插入后的迭代器
        }
        else if(ch==2){
            scanf("%d%d",&t,&id);
            long long a = t * mul + id;///
            commodities.erase(um[a]);
            um.erase(a);
        }else if(ch==3){
            scanf("%d",&K);///总的最大容纳量
            vector<vector<int> > ans(m); ///记录每类商品的实时推荐物品总数
            for(int i=0;i<m;i++)
                scanf("%d",&k[i]);
            set<Commodity>::iterator it;
            for(it=commodities.begin();it!=commodities.end();it++){
                t=(*it).id/mul;///商品类号
                if(ans[t].size()<k[t]){///该类商品的容纳量是否超出可推荐总数
                    ans[t].push_back((*it).id%mul);///获取该类商品的编号
                    if(--K==0)///是否超出 最大可推荐总数
                        break;
                }
            }
            for(int i=0;i<m;i++){
                if(ans[i].empty())
                    printf("-1\n");
                else{
                    for(int j=0;j<ans[i].size();j++)
                        printf("%d ",ans[i][j]);
                    printf("\n");
                }
            }
        }
    }

    return 0;
}

```
