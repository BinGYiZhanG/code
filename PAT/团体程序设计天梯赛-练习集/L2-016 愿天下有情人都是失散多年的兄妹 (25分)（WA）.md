
* [题解1](https://blog.csdn.net/caipengbenren/article/details/86776232)
* [题解2](https://blog.csdn.net/sm20170867238/article/details/82118718)
* [bfs](https://www.cnblogs.com/qingjiuling/p/10502072.html)

* 我写的dfs不会判断了
```
#include <bits/stdc++.h>

using namespace std;

const int maxn=100010;

struct Node{
    int id;
    int fid,mid;
    char sex;
}per[maxn];

bool dfs(int cid1,int cid2,int height){
    if(height>5)
        return true;
    if(per[cid1].fid==per[cid2].fid||per[cid1].mid==per[cid2].mid)
        return false;
    //else if((per[cid1].fid==-1&&per[cid2].fid!=-1))
    else
        dfs(per[cid1].fid,per[cid2].fid,height+1)&&
        dfs(per[cid1].fid,per[cid2].mid,height+1)&&
        dfs(per[cid1].mid,per[cid2].fid,height+1)&&
        dfs(per[cid1].mid,per[cid2].mid,height+1);
    return true;
}

int main(){
    int n,tid;
    scanf("%d",&n);
    for(int i=0;i<n;i++){
        cin>>tid;
        per[tid].id=tid;
        cin>>per[tid].sex>>per[tid].fid>>per[tid].mid;
    }
    int m;
    int c1,c2;
    scanf("%d",&m);
    for(int i=0;i<m;i++){
        scanf("%d%d",&c1,&c2);
        if(per[c1].sex==per[c2].sex){
            printf("Never Mind\n");
        }
        else{
            if(dfs(c1,c2,1))
                printf("Yes\n");
            else
                printf("No\n");
        }
    }

    return 0;
}


```

* 题解1的bfs不会解了
```
#include <bits/stdc++.h>

using namespace std;

struct Node{
    char sex;
    int fid,mid;
}cp[100000];

bool book[100000];
bool flag;///判断是否是近亲结婚

bool bfs(int id,int time){
    if(time==5||id==-1||flag==true)
        return true;
    book[id]=true;
    if(cp[id].fid!=-1){
        if(book[cp[id].fid]==false){
            bfs(cp[id].fid,time+1);
        }
        else{
            flag=true;
            return false;
        }
    }
    if(cp[id].mid!=-1){
        if(book[cp[id].mid]==false){
            bfs(cp[id].mid,time+1);
        }
        else{
            flag=true;
            return false;
        }
    }
    if(flag==true)  return false;
    return true;
}

int main(){
    int n,m,id,ch1,ch2;
    scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%d",&id);
        scanf("%s %d %d",&cp[id].sex,&cp[id].fid,&cp[id].mid);
        cp[cp[id].fid].sex='M';
        cp[cp[id].mid].sex='F';
    }
    scanf("%d",&m);
    while(m--){
        scanf("%d%d",&ch1,&ch2);
        memset(book,false,sizeof(book));
        flag=false;
        if(cp[ch1].sex==cp[ch2].sex)
            printf("Never Mind\n");
        else{
            if(bfs(ch1,0)&&bfs(ch2,0))
                printf("Yes\n");
            else
                printf("No\n");
        }
    }

    return 0;
}


```

* 题解2也不会了
```
#include <bits/stdc++.h>

using namespace std;

struct Node{
    char sex;
    int fid,mid;
}cp[100000];

//int gender[100000];
bool book[100000];
bool flag;///判断是否是近亲结婚

void dfs(int id,int num){
    if(num>=4)
        return ;
    if(!book[cp[id].fid]){
        book[cp[id].fid]=true;
        dfs(cp[id].fid,num+1);
    }
    else{
        flag=true;
    }
    if(!book[cp[id].mid]){
        book[cp[id].mid]=true;
        dfs(cp[id].mid,num+1);
    }
    else{
        flag=true;
    }
}

int main(){
    int n,m,id,ch1,ch2;
    scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%d",&id);
        scanf("%s %d %d",&cp[id].sex,&cp[id].fid,&cp[id].mid);
        cp[cp[id].fid].sex='M';
        cp[cp[id].mid].sex='F';
    }
    scanf("%d",&m);
    while(m--){
        scanf("%d%d",&ch1,&ch2);
        memset(book,false,sizeof(book));
        flag=false;
        dfs(ch1,0);
        dfs(ch2,0);
        if(cp[ch1].sex==cp[ch2].sex)
            printf("Never Mind\n");
        else{
            if(flag==false)
                printf("Yes\n");
            else
                printf("No\n");
        }
    }

    return 0;
}
```
