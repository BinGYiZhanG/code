
* ```set<int> st的find函数和end函数出错```
* [题目解析](https://blog.csdn.net/qq_40946921/article/details/87942284)
```
#include <bits/stdc++.h>

using namespace std;

struct Node{
    int data;
    Node *lchild,*rchild;
};

Node* newNode(int data){
    Node* node=new Node;
    node->data=data;
    node->lchild=node->rchild=NULL;
    return node;
}

void insert_(Node* &root,int x){
    if(root==NULL){
        root=newNode(x);
        return ;
    }
    if(x<=root->data){
        insert_(root->lchild,x);
    }
    else{
        insert_(root->rchild,x);
    }
}
int n;

///判断是否是根
bool is_root(Node *root,int data){
    if(data==root->data)
        return true;
    else
        return false;
}

///判断是否是兄弟
bool is_siblings(Node *root,int lf,int rt){
    if(root==NULL)
        return false;
    else if(root->lchild==NULL||root->rchild==NULL)
        return false;
    else if((root->lchild->data==lf&&root->rchild->data==rt)||
            (root->lchild->data==rt&&root->rchild->data==lf))
        return true;
    else
        return is_siblings(root->lchild,lf,rt)||is_siblings(root->rchild,lf,rt);
}

///计算结点高度
void get_level(Node *root,int depth,int data,int &rheight){
    if(root==NULL)
        return ;
    if(root->data==depth)
        rheight=depth;
    get_level(root->lchild,depth+1,data,rheight);
    get_level(root->rchild,depth+1,data,rheight);
}

///判断是否是
bool is_parent(Node *root,int parent,int descent){
    if(root==NULL)
        return false;
    else if(root->lchild==NULL&&root->rchild==NULL)
        return false;
    else if((root->lchild!=NULL&&root->data==parent&&root->lchild->data==descent)||
            (root->rchild!=NULL&&root->data==parent&&root->rchild->data==descent))
        return true;
    else
        return is_parent(root->lchild,parent,descent)||is_parent(root->rchild,parent,descent);
}

bool is_lchild(Node *root,int parent,int descent){
    if(root==NULL)
        return false;
    else if(root->lchild==NULL)
        return false;
    else if(root->data==parent&&root->lchild->data==descent)
        return true;
    else
        return is_lchild(root->lchild,parent,descent)||is_lchild(root->rchild,parent,descent);
}

bool is_rchild(Node *root,int parent,int descent){
    if(root==NULL)
        return false;
    else if(root->rchild==NULL)
        return false;
    else if(root->data==parent&&root->rchild->data==descent)
        return true;
    else
        return is_rchild(root->lchild,parent,descent)||is_rchild(root->rchild,parent,descent);
}

int adepth,bdepth;

void countHeight(Node *root,int depth,int anum,int bnum){
    if(root==NULL)
        return ;
    if(root->data==anum)
        adepth=depth;
    if(root->data==bnum)
        bdepth=depth;
    countHeight(root->lchild,depth+1,anum,bnum);
    countHeight(root->rchild,depth+1,anum,bnum);
}

set<int> st;

int main(){
    Node *root=NULL,*tmp;
    scanf("%d",&n);
    int x;
    for(int i=0;i<n;i++){
        scanf("%d",&x);
        st.insert(x);
        insert_(root,x);
    }
    int m;
    string line;
    scanf("%d",&m);
    getchar();
    for(int i=0;i<m;i++){
        getline(cin,line);
        tmp=root;
        if(line.find("root")!=string::npos){
            int iroot=0;
            for(int j=0;j<(int)line.size();j++)
                if(isdigit(line[j]))    iroot=iroot*10+(line[j]-'0');
            //printf("%d\n",iroot);
            if(st.find(iroot)==st.end()){
                printf("No\n");
                continue;
            }
            if(is_root(tmp,iroot))
                printf("Yes\n");
            else
                printf("No\n");
        }
        else if(line.find("siblings")!=string::npos){
            int lf=0,rt=0,j=0;
            for(;j<(int)line.size();j++){
                if(isdigit(line[j]))    lf=lf*10+(line[j]-'0');
                else   break;
            }
            j+=5;
            //cout<<line[j]<<endl;
            for(;j<(int)line.size();j++){
                if(isdigit(line[j]))    rt=rt*10+(line[j]-'0');
                else   break;
            }
            if(st.find(lf)==st.end()||st.find(rt)==st.end()){
                printf("No\n");
                continue;
            }
            if(is_siblings(tmp,lf,rt))
                printf("Yes\n");
            else
                printf("No\n");
        }
        else if(line.find("level")!=string::npos){
            int lf=0,rt=0,j=0;
            for(;j<(int)line.size();j++){
                if(isdigit(line[j]))    lf=lf*10+(line[j]-'0');
                else   break;
            }
            j+=5;
            //cout<<line[j]<<endl;
            for(;j<(int)line.size();j++){
                if(isdigit(line[j]))    rt=rt*10+(line[j]-'0');
                else   break;
            }
            if(st.find(lf)==st.end()||st.find(rt)==st.end()){
                printf("No\n");
                continue;
            }
            //int lheight=0,rheight=0;
            /*
            get_level(tmp,0,lf,lheight);
            tmp=root;
            get_level(tmp,0,rt,rheight);
            //cout<<lf<<" "<<rt<<endl;
            */
            countHeight(tmp,0,lf,rt);
            //cout<<adepth<<" "<<bdepth<<endl;
            if(adepth==bdepth)
                printf("Yes\n");
            else
                printf("No\n");
        }
        else if(line.find("parent")!=string::npos){
            int parent=0,descent=0;
            for(int j=0;j<(int)line.size();j++){
                if(isdigit(line[j]))    parent=parent*10+(line[j]-'0');
                else   break;
            }
            //cout<<line[j]<<endl;
            int st=0;
            for(int j=(int)line.size()-1;j>=0;j--){
                if(!isdigit(line[j])){
                    st=j;
                    break;
                }
            }
            for(int j=st+1;j<(int)line.size();j++){
                descent=descent*10+(line[j]-'0');
            }
            int pt=parent,dt=descent;
            //cout<<parent<<" "<<descent<<endl;
            if(st.find(pt)==st.end()||st.find(dt)==st.end()){
                printf("No\n");
                continue;
            }
            if(is_parent(tmp,parent,descent))
                printf("Yes\n");
            else
                printf("No\n");
        }
        else if(line.find("left")!=string::npos){
            int parent=0,descent=0;
            for(int j=0;j<(int)line.size();j++){
                if(isdigit(line[j]))    parent=parent*10+(line[j]-'0');
                else   break;
            }
            //cout<<line[j]<<endl;
            int st=0;
            for(int j=(int)line.size()-1;j>=0;j--){
                if(!isdigit(line[j])){
                    st=j;
                    break;
                }
            }
            for(int j=st+1;j<(int)line.size();j++){
                descent=descent*10+(line[j]-'0');
            }
            //cout<<parent<<" "<<descent<<endl;
            if(st.find(parent)==st.end()||st.find(descent)==st.end()){
                printf("No\n");
                continue;
            }
            if(is_lchild(tmp,descent,parent))
                printf("Yes\n");
            else
                printf("No\n");
        }
        else if(line.find("right")!=string::npos){
            int parent=0,descent=0;
            for(int j=0;j<(int)line.size();j++){
                if(isdigit(line[j]))    parent=parent*10+(line[j]-'0');
                else   break;
            }
            //cout<<line[j]<<endl;
            int st=0;
            for(int j=(int)line.size()-1;j>=0;j--){
                if(!isdigit(line[j])){
                    st=j;
                    break;
                }
            }
            for(int j=st+1;j<(int)line.size();j++){
                descent=descent*10+(line[j]-'0');
            }
            //cout<<parent<<" "<<descent<<endl;
            if(st.find(parent)==st.end()||st.find(descent)==st.end()){
                printf("No\n");
                continue;
            }
            if(is_rchild(tmp,descent,parent))
                printf("Yes\n");
            else
                printf("No\n");
        }
    }
}

```
